{
  "hash": "33286d045eb7536fa59c547beda0aab8",
  "result": {
    "markdown": "---\ntitle: \"Anomaly-outlier detection DBSCAN labels for scatter plot\"\nauthor: \"Heba Nusair\"\ndate: \"2023-11-06\"\ncategories: [news, code, analysis]\nimage: \"image.jpg\"\n---\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nfrom sklearn.cluster import DBSCAN\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.neighbors import NearestNeighbors\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# Load the data\ndf = pd.read_csv('WorkersHomeplacesNewUpdate.csv')\n\n# Select only the geographic coordinates\ndf_geo = df[['X', 'Y']]\n\n# Standardizing the features\nscaler = StandardScaler()\ndf_geo_scaled = scaler.fit_transform(df_geo)\n\n# Plot the k-distance graph\nnbrs = NearestNeighbors(n_neighbors=4).fit(df_geo_scaled)\ndistances, indices = nbrs.kneighbors(df_geo_scaled)\n\n# Sort the distances and plot them\ndistances = np.sort(distances, axis=0)\ndistances = distances[:, 3-1]\nplt.figure(figsize=(12, 6))\nplt.plot(distances)\nplt.title('k-distance Graph')\nplt.xlabel('Point index')\nplt.ylabel('Distance to 3rd nearest neighbor')\nplt.show()\n\n# After identifying a new eps value from the graph, adjust eps and min_samples\neps_value = 0.05  # This is an example, adjust based on the k-distance graph\nmin_samples_value = 20  # This is an example, adjust based on the dataset\n\n# Perform DBSCAN clustering with the new parameters\ndbscan = DBSCAN(eps=eps_value, min_samples=min_samples_value)\nclusters = dbscan.fit_predict(df_geo_scaled)\n\n# Add cluster labels to the dataframe\ndf['Cluster'] = clusters\n\n# Plot the clusters with the new parameters\nplt.figure(figsize=(10, 6))\nscatter = plt.scatter(df['X'], df['Y'], c=df['Cluster'], cmap='viridis', marker='o')\nplt.title('Adjusted DBSCAN Clustering of Homeplaces')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')\nplt.colorbar(scatter, label='Cluster Label')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-2-output-1.png){width=969 height=523}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-2-output-2.png){width=793 height=523}\n:::\n:::\n\n\n",
    "supporting": [
      "index_files\\figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}