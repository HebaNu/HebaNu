{
  "hash": "d725537b05f7d360bd98d3a6844a2fde",
  "result": {
    "markdown": "---\ntitle: \"Classificcation\"\nauthor: \"Heba Nusair\"\ndate: \"2023-11-06\"\ncategories: [news, code, analysis]\nimage: \"image.jpg\"\n---\n\n### **random forest classifier**\n\n##### Unveiling the Tapestry of Urban Preferences for Workers On Site (WOS): A Data-Driven Glimpse into Roanoke's Metropolitan Living Choices\n\nDeciding where to live is a big decision for anyone, and for the people of Roanoke, it's no different. We all have our own checklist when it comes to choosing our neighborhoods -- some of us want to be close to work, others are looking for good schools for the kids, and some might prioritize a big backyard over everything else.\n\nTo get to the heart of what matters most to Roanoke's residents, we turned to data. Using a detailed survey filled with personal insights from locals, we analyzed a range of factors from work life to family plans, all to answer one question: What drives people's choices about where they live?\n\nArmed with Python, a popular programming language, and a machine learning tool called Random Forest, we dug into the data. Think of Random Forest as a detective that examines all the evidence (or data) and identifies the usual suspects (or factors) that play a role in our living choices.\n\nAfter some thorough data cleaning to make sure we were working with accurate information, we let the Random Forest algorithm get to work. It looked at various details about people's lives, including how far they live from work, their family size, and their income.\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import StandardScaler, OneHotEncoder\nfrom sklearn.compose import ColumnTransformer\nfrom sklearn.ensemble import RandomForestClassifier\n\n# Load the dataset\ndata = pd.read_excel('Classification (In_person_Workers).xlsx')\n\n# Replace non-breaking spaces in column names\ndata.columns = data.columns.str.replace('\\xa0', ' ', regex=True)\n\n# Correct any potential typos in column names\n# Ensure these column names exactly match those in your DataFrame\ndata.rename(columns={'living costs ': 'living costs'}, inplace=True)\n\n# Convert the first four columns into a single ordinal dependent variable\n# Ensure these column names exactly match those in your DataFrame\narea_columns = ['City Center (Central Business District)', 'Urban area', 'Suburban area', 'Rural Area']\ndata['PreferredArea'] = data[area_columns].idxmin(axis=1)\ndata.drop(columns=area_columns, inplace=True)\n\n# Handle missing values (NaNs) for both features and target variable\ndata.dropna(inplace=True)\n\n# Define the list of categorical and continuous features\n# Replace these with the actual column names from your DataFrame\ncategorical_features = ['marital status', 'race', 'education level', 'firm age', 'firm size', 'owner or renter',\n                        'number of workers in household', 'people in household', 'desired family size in future',\n                        'monthly earning', 'industry sector']  # Add other categorical features here\ncontinuous_features = ['distance from work to homeplace']  # Add other continuous features here\n\n# Preprocessing pipeline\npreprocessor = ColumnTransformer(\n    transformers=[\n        ('num', StandardScaler(), continuous_features),\n        ('cat', OneHotEncoder(), categorical_features)\n    ])\n\n# Preprocess the data\nX = preprocessor.fit_transform(data.drop('PreferredArea', axis=1))\ny = data['PreferredArea'].astype(str)  # Convert to string if categorical\n\n# Split the data\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)\n\n# Train the Random Forest Classifier\nrf = RandomForestClassifier()\nrf.fit(X_train, y_train)\n\n# Get feature importances\nfeature_names = continuous_features + list(preprocessor.named_transformers_['cat'].get_feature_names_out(categorical_features))\nimportances = rf.feature_importances_\nsorted_indices = np.argsort(importances)[::-1]\n\n# Display feature importances\nprint(\"Feature Importances:\")\nfor i in sorted_indices:\n    print(f'{feature_names[i]}: {importances[i]}')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nFeature Importances:\ndistance from work to homeplace: 0.09002612946914397\nmonthly earning_2.0: 0.023009968591018892\nfirm age_3.0: 0.022066217557628148\nfirm age_2.0: 0.02178559852138124\nmonthly earning_3.0: 0.021202236546842827\neducation level_5.0: 0.02108766672755149\npeople in household_4.0: 0.020712561627613753\nfirm size_3.0: 0.02061758469686424\nnumber of workers in household_1.0: 0.01987931322088943\nrace_1.0: 0.019170637314066253\nnumber of workers in household_2.0: 0.018227712556543547\nmarital status_2.0: 0.01792009287530063\nmonthly earning_1.0: 0.017725399326598428\nmarital status_1.0: 0.017647663214915434\nfirm size_2.0: 0.017494778926449992\npeople in household_3.0: 0.01744113353445406\ndesired family size in future_3.0: 0.017297127480639732\ndesired family size in future_5.0: 0.017172156470246985\ndesired family size in future_2.0: 0.017159685682679497\nnumber of workers in household_3.0: 0.01658143581927266\nfirm age_4.0: 0.016554662514985195\nowner or renter_2.0: 0.016546727139497674\neducation level_2.0: 0.016361787784908096\nfirm age_5.0: 0.01617195897267983\ndesired family size in future_4.0: 0.01613628436333632\neducation level_6.0: 0.015963605218692858\npeople in household_5.0: 0.015499605537140977\nindustry sector_Wholesale Trade: 0.015405581044116481\nowner or renter_1.0: 0.015366799522148065\nindustry sector_Retail Trade: 0.014128715730823135\npeople in household_2.0: 0.013755035240451565\nfirm size_4.0: 0.013680838762537438\ndesired family size in future_1.0: 0.013142519737222351\nindustry sector_Manufacturing: 0.013123564815275641\nfirm size_5.0: 0.013121656767595385\nfirm size_1.0: 0.012925121482568677\neducation level_3.0: 0.011762777181883038\nindustry sector_Mining, Quarrying, and Oil and Gas Extraction: 0.011660015892781065\neducation level_8.0: 0.011494696532905956\nindustry sector_Management of Companies and Enterprises: 0.011191786850415112\nindustry sector_Professional, Scientific, and Technical Services: 0.011074737987177273\nindustry sector_Transportation and Warehousing: 0.010992139215513192\nmonthly earning_4.0: 0.010804431753287986\nrace_3.0: 0.010657472708133386\neducation level_7.0: 0.010494554394713536\nrace_4.0: 0.010301577275841302\nmarital status_5.0: 0.010224017252462966\nrace_2.0: 0.010084721094465638\nmarital status_6.0: 0.009740825402188322\nindustry sector_Accommodation and Food Services: 0.009584908298269924\npeople in household_1.0: 0.009397885983715973\nindustry sector_Educational Services: 0.009150833265968035\nfirm age_1.0: 0.009067843560460899\nindustry sector_Construction: 0.008759722771524496\nindustry sector_Finance and Insurance: 0.00848243917039083\nmarital status_3.0: 0.008434947179675965\nindustry sector_Information: 0.00828232753547185\nrace_8.0: 0.008000592702388799\neducation level_4.0: 0.007984970818286176\nrace_5.0: 0.007826833389725398\nrace_6.0: 0.007525632388179478\nindustry sector_Other Services [except Public Administration: 0.007489751645997572\neducation level_1.0: 0.007209285876944427\nmarital status_4.0: 0.006995018142928353\nindustry sector_Health Care and Social Assistance: 0.006623366898713113\nrace_7.0: 0.006498596306725328\nindustry sector_Agriculture, Forestry, Fishing and Hunting: 0.006475940870469769\nindustry sector_Utilities: 0.006014659612348908\nindustry sector_Arts, Entertainment, and Recreation: 0.005358401035027692\nindustry sector_Administrative and Support and Waste Management and Remediation Services: 0.004379128546677525\nindustry sector_Real Estate and Rental and Leasing: 0.003934044212507423\nindustry sector_Public Administration: 0.003929551451752581\n```\n:::\n:::\n\n\nThe results were clear: The commute to work stood out as the number one factor. This wasn't too surprising -- after all, who wants to spend hours in traffic when they could be home relaxing? Income was also a key factor. It seems the more we earn, the more choices we have about where we live.\n\nBut it's not all about money and travel time. The data also showed us that personal factors, like whether someone is married or planning for a big family, have a big say in the decision too.\n\nThis isn't just interesting information. It's valuable knowledge for city planners and developers. By understanding what's important to residents, they can plan and build communities that better meet people's needs and make Roanoke an even better place to live.\n\nSo next time you're driving through Roanoke's neighborhoods, remember that each home you see represents a decision made based on a unique mix of practical needs and personal dreams.\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Assuming 'importances', 'feature_names' are already defined as in your previous code\n# Sorting the feature importances\nsorted_indices = np.argsort(importances)[::-1]\nsorted_importances = importances[sorted_indices]\nsorted_features = [feature_names[i] for i in sorted_indices]\n\n# Selecting a number of top features to display (you can adjust this number)\nn_top_features = 20  # for example, top 20 features\n\n# Creating the plot\nplt.figure(figsize=(10, 8))\nsns.barplot(x=sorted_importances[:n_top_features], y=sorted_features[:n_top_features])\nplt.title('Top Feature Importances')\nplt.xlabel('Importance')\nplt.ylabel('Feature')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-3-output-1.png){width=1034 height=671}\n:::\n:::\n\n\n**A Visual Journey Through Roanoke's Residential Decision Drivers**\n\nIn our previous discussion, we delved into the factors that influence where workers on-site (WOS) in Roanoke choose to live. We discovered that the daily commute and income levels are among the top considerations. But how do these factors stack up against each other? Let's take a visual dive into the data.\n\nThe accompanying chart lays out the findings from our Random Forest analysis in a colorful display of bars, each representing a factor's weight in the decision-making process. At a glance, the lengthier bars catch the eye---these are the heavy hitters of home location preferences.\n\n![Feature Importances Chart](https://chat.openai.com/c/path-to-your-uploaded-chart.png){alt=\"Feature Importances Chart\"} *Note: Replace the placeholder with the actual path to your image.*\n\nDominating the scene is 'distance from work to homeplace,' a beacon of red at the top, which resonates with anyone who's ever been caught in the snarl of rush hour. This is followed closely by a cascade of oranges and yellows highlighting the importance of 'monthly earnings' across various brackets and the age and size of firms.\n\nAs we move down the chart, the colors shift to cooler greens and blues, representing factors like household size and marital status. These may not be the titans of the plot, but they still play a pivotal role in the collective narrative of where we live.\n\nWhat's truly intriguing is the story this visual tells us---beyond numbers and models, it's about real-life choices and priorities. For instance, the significance of 'people in household_4.0' and 'education level_5.0' (a bachelor's degree) speaks to the aspirations and day-to-day realities that shape our sense of place.\n\nCity planners and housing developers, take note: this chart is more than just a pretty picture. It's a roadmap to the hearts and minds of Roanoke's residents, guiding the way to communities that not only house but also support and enrich their lives.\n\nAs we continue to shape Roanoke's urban landscape, let's keep these visual cues in mind, ensuring that every development, from high-rises to townhomes, aligns with the genuine preferences of those who will call them home. After all, understanding these preferences is the key to building not just houses but homes where life's stories can unfold.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}