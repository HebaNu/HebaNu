{
  "hash": "50af989ff9fa6f407e6e917a67413f15",
  "result": {
    "markdown": "---\ntitle: \"Unveiling the Tapestry of Residential Preferences for Workers, A Data-Driven Glimpse into Roanoke's Metropolitan Living Choices\"\nsubtitle: \"Random Forest Classifier\"\nauthor: \"Heba Nusair\"\ndate: \"2023-11-20\"\ncategories: [research, code, analysis, plot]\nimage: \"confused-c2e1e9d14491a9486d996da945debcc9d6ce7170-s1100-c50.jpg\"\n---\n\nDeciding where to live for **Workers on-Site (WOS)** is a big decision for everyone, and for the people of Roanoke, it's no different. We all have our own checklist when it comes to choosing our neighborhoods -- some of us want to be close to work, others are looking for good schools for the kids, and some might prioritize a big backyard over everything else.\n\n![*Factors that might influence the residential decision-making process for Workers on_Site*](WhereToLiveForInPersonWorkers.JPG)\n\nTo get to the heart of what matters most to Roanoke's residents, we turned to data. Using a detailed survey filled with personal insights from locals. the datasets featured in these blog posts have beenÂ ***modified and synthesized for educational purposes**. They demonstrate various data analysis techniques.* We analyzed a range of factors from work life to family plans, all to answer one question: **`What drives people's choices about where they live`**?\n\nArmed with Python, a popular programming language, and a machine learning tool called **Random Forest**, we dug into the data. Think of Random Forest as a detective that examines all the evidence (or data) and identifies the usual suspects (or factors) that play a role in workers' home-place choices.\n\nThe goal of using a Random Forest Classifier is to identify the factors that influence the residential preferences of **Workers on-Site (WOS)** in the Roanoke Metropolitan Area. Here are the specific objectives Random Forest helps to achieve:\n\n1.  **Feature Importance:** Random Forest can determine the relative importance of each factor (like distance to work, income level, family size) in predicting residential preferences. This insight can inform urban planning and real estate development.\n\n2.  **Predictive Modeling:** It can predict an individual's preferred living area based on the features in the dataset, which could be useful for personalized recommendations or targeted marketing for real estate.\n\n3.  **Handling Complexity:** Random Forest is robust to complex interactions between features and can handle non-linear relationships without the need for transformation, making it well-suited for diverse and complex datasets.\n\n4.  **Reducing Overfitting:** Due to its ensemble nature (combining multiple decision trees), Random Forest is less prone to overfitting compared to individual decision trees, leading to more reliable predictions.\n\n5.  **Versatility:** It can handle both categorical and numerical data, making it versatile for datasets that contain a mix of different types of variables as is often the case in survey data.\n\n6.  **Understanding Population Segments:** By examining which features are most influential, stakeholders can understand different segments of the population better and tailor their services or policies accordingly.\n\nIn essence, *Random Forest acts as a powerful analytical tool that turns a complex array of data points into actionable insights about what drives people's choices on where to live*.\n\nAfter some thorough data cleaning to make sure we were working with accurate information, we let the Random Forest algorithm get to work. It looked at various details about people's lives, including how far they live from work, their family size, and their income.\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import StandardScaler, OneHotEncoder\nfrom sklearn.compose import ColumnTransformer\nfrom sklearn.ensemble import RandomForestClassifier\n\n# Load the dataset\ndata = pd.read_excel('Classification (In_person_Workers).xlsx')\n\n# Replace non-breaking spaces in column names\ndata.columns = data.columns.str.replace('\\xa0', ' ', regex=True)\n\n# Correct any potential typos in column names\n# Ensure these column names exactly match those in DataFrame\ndata.rename(columns={'living costs ': 'living costs'}, inplace=True)\n\n# Convert the first four columns into a single ordinal dependent variable\n# Ensure these column names exactly match those in the DataFrame\narea_columns = ['City Center (Central Business District)', 'Urban area', 'Suburban area', 'Rural Area']\n# For each row, it finds the column among the specified area_columns that has the minimum value \n# (which would be equivalent to the highest preference rank, assuming 1 is the most preferred and \n# larger numbers indicate lower preferences) and stores the name of this column (i.e., the living area \n# with the highest preference for that row) as the value in the new Preferred_Living_Location column.\n\ndata['Preferred_Living_Location'] = data[area_columns].idxmin(axis=1)\ndata.drop(columns=area_columns, inplace=True)\n\n# Handle missing values (NaNs) for both features and target variable\ndata.dropna(inplace=True)\n\n# Define the list of categorical and continuous features\n# Replace these with the actual column names from the DataFrame\ncategorical_features = ['marital status', 'race', 'education level', 'firm age', 'firm size', 'owner or renter',\n                        'number of workers in household', 'people in household', 'desired family size in future',\n                        'monthly earning', 'industry sector']  # categorical features \ncontinuous_features = ['distance from work to homeplace']  # continuous features here\n\n# Preprocessing pipeline\npreprocessor = ColumnTransformer(\n    transformers=[\n        ('num', StandardScaler(), continuous_features),\n        ('cat', OneHotEncoder(), categorical_features)\n    ])\n\n# Preprocess the data\nX = preprocessor.fit_transform(data.drop('Preferred_Living_Location', axis=1))\ny = data['Preferred_Living_Location'].astype(str)  # Convert to string if categorical\n\n# Split the data\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)\n\n# Train the Random Forest Classifier\nrf = RandomForestClassifier()\nrf.fit(X_train, y_train)\n\n# Get feature importances\nfeature_names = continuous_features + list(preprocessor.named_transformers_['cat'].get_feature_names_out(categorical_features))\nimportances = rf.feature_importances_\nsorted_indices = np.argsort(importances)[::-1]\n\n# Display feature importances\nprint(\"Feature Importances:\")\nfor i in sorted_indices:\n    print(f'{feature_names[i]}: {importances[i]}')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nFeature Importances:\ndistance from work to homeplace: 0.08581557357432558\nfirm size_3.0: 0.023831325270661122\nfirm age_3.0: 0.023801768756431457\nmonthly earning_3.0: 0.021956420883617985\nfirm size_2.0: 0.020299399017998633\nfirm age_2.0: 0.020254898791173773\nrace_1.0: 0.019946374821814442\nmonthly earning_2.0: 0.019777261701383785\nowner or renter_2.0: 0.019517196096276383\nmarital status_2.0: 0.019325984725923527\ndesired family size in future_5.0: 0.01868568981853052\npeople in household_4.0: 0.01862285271444624\neducation level_5.0: 0.018360470842324603\npeople in household_3.0: 0.018173924737792172\nowner or renter_1.0: 0.017681673797988\nfirm age_4.0: 0.01767430944879349\ndesired family size in future_4.0: 0.017652962669672253\nmarital status_1.0: 0.017638913591099824\nnumber of workers in household_1.0: 0.017253016503299624\neducation level_6.0: 0.0170827877089244\neducation level_2.0: 0.016894958628763668\nnumber of workers in household_2.0: 0.016282138406549417\ndesired family size in future_2.0: 0.01609703603118665\nmonthly earning_1.0: 0.016048272140420553\ndesired family size in future_3.0: 0.01595251634427413\nfirm age_5.0: 0.015816728499939845\npeople in household_5.0: 0.015455168917015556\nindustry sector_Manufacturing: 0.014835040350504222\npeople in household_2.0: 0.014557516017944376\nfirm size_4.0: 0.014468295827337888\nindustry sector_Wholesale Trade: 0.013440892428752162\nnumber of workers in household_3.0: 0.013416769157309185\nrace_3.0: 0.013226992234950358\neducation level_3.0: 0.01306315035084587\nfirm size_1.0: 0.01261541381847708\nindustry sector_Retail Trade: 0.01223577940343046\nfirm size_5.0: 0.012185497501595081\nindustry sector_Professional, Scientific, and Technical Services: 0.012177679231942054\nindustry sector_Mining, Quarrying, and Oil and Gas Extraction: 0.012096800771621365\neducation level_8.0: 0.01171805911530627\ndesired family size in future_1.0: 0.011602934345321943\neducation level_7.0: 0.011427029900633023\nrace_2.0: 0.010923908854423629\nindustry sector_Management of Companies and Enterprises: 0.010843386352531317\nmonthly earning_4.0: 0.010810475743884529\nindustry sector_Accommodation and Food Services: 0.010749794832040669\nindustry sector_Construction: 0.010366685824365543\nindustry sector_Transportation and Warehousing: 0.010180261914893787\nindustry sector_Educational Services: 0.00999878899221253\nrace_4.0: 0.009518244525236589\npeople in household_1.0: 0.009306493981294859\nmarital status_3.0: 0.008996768358033825\nmarital status_6.0: 0.008756458469077109\nfirm age_1.0: 0.008654811685135067\nindustry sector_Information: 0.008426304016689387\neducation level_4.0: 0.008278462323909271\nrace_6.0: 0.008259459048517562\nrace_8.0: 0.008180267963390778\nmarital status_5.0: 0.008093831377351483\nrace_5.0: 0.008022302018560797\nindustry sector_Finance and Insurance: 0.007783585329801868\neducation level_1.0: 0.007378301798293264\nrace_7.0: 0.0073663983465930795\nindustry sector_Health Care and Social Assistance: 0.007237149336786159\nmarital status_4.0: 0.007234581433375203\nindustry sector_Arts, Entertainment, and Recreation: 0.006470882862312506\nindustry sector_Utilities: 0.006286585982563125\nindustry sector_Agriculture, Forestry, Fishing and Hunting: 0.006007135487740818\nindustry sector_Other Services [except Public Administration: 0.005517225766576487\nindustry sector_Public Administration: 0.004400844876640574\nindustry sector_Administrative and Support and Waste Management and Remediation Services: 0.0036422020042296602\nindustry sector_Real Estate and Rental and Leasing: 0.00334092559693964\n```\n:::\n:::\n\n\n#### **General Interpretation:**\n\n-   The features with higher importance scores are more influential in determining the preferred living area. This doesn't necessarily mean causation but indicates a stronger association.\n\n-   The model suggests that practical considerations like distance to work, firm age, earnings, and household characteristics play a significant role in determining living area preferences.\n\n**Caveats:**\n\n-   The Random Forest model ***treats the problem as a classification task*** and **does not inherently account for the ordinal nature of the dependent variable**.\n\n-   The results should be interpreted as indicative rather than definitive. For more precise modeling of ordinal outcomes, specific ordinal regression models would be more appropriate.\n\nIn summary, the model's output provides a useful guide to understanding which factors are most influential in determining living area preferences, with distance from work appearing as the most significant factor according to this model.\\]\\\n\\\nThe results were clear: For workers who commute to work; the distance from workplace to homeplace stood out as the number one factor. This wasn't too surprising -- after all, who wants to spend hours in traffic when they could be home relaxing? Income was also a key factor. It seems the more we earn, the more choices we have about where we live.\n\nBut it's not all about money and travel time. The data also showed us that personal factors, like whether someone is married or planning for a big family, have a big say in the decision too.\n\nThis isn't just interesting information. It's valuable knowledge for city planners and developers. By understanding what's important to residents, they can plan and build communities that better meet people's needs and make Roanoke an even better place to live.\n\nSo next time you're driving through Roanoke's neighborhoods, remember that each home you see represents a decision made based on a unique mix of practical needs and personal dreams.\n\n#### **A Visual Journey Through Roanoke's Residential Decision Drivers**\n\nIn our previous discussion, we delved into the factors that influence where **WOS** in Roanoke choose to live. We discovered that the daily commute and income levels are among the top considerations. But how do these factors stack up against each other? Let's take a visual dive into the data.\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Assuming 'importances', 'feature_names' are already defined as in the previous code\n# Sorting the feature importances\nsorted_indices = np.argsort(importances)[::-1]\nsorted_importances = importances[sorted_indices]\nsorted_features = [feature_names[i] for i in sorted_indices]\n\n# Selecting a number of top features to display (you can adjust this number)\nn_top_features = 20  # for example, top 20 features\n\n# Creating the plot\nplt.figure(figsize=(6.5, 6.5))\nsns.barplot(x=sorted_importances[:n_top_features], y=sorted_features[:n_top_features])\nplt.title('Significance of factors in residential decision-making process')\nplt.xlabel('Level of importance')\nplt.ylabel('Factors')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-3-output-1.png){width=777 height=560}\n:::\n:::\n\n\nThe accompanying chart lays out the findings from our Random Forest analysis in a colorful display of bars, each representing a factor's weight in the decision-making process. At a glance, the lengthier bars catch the eye---these are the heavy hitters of home location preferece.\n\nDominating the scene is 'distance from work to homeplace,' a beacon of red at the top, which resonates with anyone who's ever been caught in the snarl of rush hour. This is followed closely by a cascade of oranges and yellows highlighting the importance of 'monthly earnings' across various brackets and the age and size of firms.\n\nAs we move down the chart, the colors shift to cooler greens and blues, representing factors like household size and marital status. These may not be the titans of the plot, but they still play a pivotal role in the collective narrative of where we live.\n\nWhat's truly intriguing is the story this visual tells us---beyond numbers and models, it's about real-life choices and priorities. For instance, the significance of 'people in household_4.0' and 'education level_5.0' (a bachelor's degree) speaks to the aspirations and day-to-day realities that shape our sense of place.\n\nCity planners and housing developers, take note: this chart is more than just a pretty picture. It's a roadmap to the hearts and minds of Roanoke's residents, guiding the way to communities that not only house but also support and enrich their lives.\n\nAs we continue to shape Roanoke's urban landscape, let's keep these visual cues in mind, ensuring that every development, from high-rises to townhomes, aligns with the genuine preferences of those who will call them home. After all, understanding these preferences is the key to building not just houses but homes where life's stories can unfold.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}